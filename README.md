# Тестовое задание SQL и PL/SQL

## Описание

Этот проект содержит SQL-скрипты и PL/SQL-пакет для работы с договорами и комментариями к ним. Он включает в себя создание таблиц `CONTRACTS` и `CONTRACT_COMMENT`, триггеров для автоматического заполнения полей, представлений для анализа данных и PL/SQL-пакета для управления комментариями.

## Инструкция по установке

1.  Убедитесь, что у вас установлена и настроена Postgres.
2.  Подключитесь к базе данных с помощью SQL*Plus или SQL Developer.
3.  Выполните скрипты из файла `create_tables.sql` для создания таблиц, последовательностей и триггеров.
4.  Выполните скрипты из файла `create_views.sql` для создания представлений.
5.  Выполните скрипты из файла `create_package.sql` для создания PL/SQL-пакета.
6.  Выполните скрипты из файла `test_data.sql` для заполнения тестовых данных.
7.  Используйте PL/SQL-пакет `CONTRACT_COMMENT_PKG` для управления комментариями.

## Структура проекта

* `create_tables.sql` - скрипт для создания таблиц `CONTRACTS` и `CONTRACT_COMMENT`, последовательностей и триггеров.
* `create_views.sql` - скрипт для создания представлений.
* `create_package.sql` - скрипт для создания PL/SQL-пакета `CONTRACT_COMMENT_PKG`.
* `test_data.sql` - скрипт для заполнения тестовых данных.
* `README.md` - этот файл.

## Использование

### Создание таблиц, триггеров и представлений

Выполните скрипты `create_tables.sql` и `create_views.sql` для создания необходимых объектов базы данных.

### Использование PL/SQL-пакета

Используйте PL/SQL-пакет `CONTRACT_COMMENT_PKG` для добавления, обновления и удаления комментариев, а также для получения количества договоров с 2 и более комментариями.

Примеры использования:

```sql
-- Добавление комментария
EXEC CONTRACT_COMMENT_PKG.add_comment(1, 'Тестовый комментарий 1');

-- Обновление комментария
EXEC CONTRACT_COMMENT_PKG.update_comment(1, 'Обновленный комментарий');

-- Удаление комментария
EXEC CONTRACT_COMMENT_PKG.delete_comment(1);

-- Получение количества договоров с 2 и более комментариями
SELECT CONTRACT_COMMENT_PKG.get_contracts_with_multiple_comments FROM DUAL;
